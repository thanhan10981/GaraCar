<div class="container">
    <div class="sidebar_content">
        <div class="title">
            <h2>S·ªï qu·ªπ ti·ªÅn m·∫∑t</h2>
        </div>
        <div class="sidebar">
            <h4>Qu·ªπ ti·ªÅn</h4>
            <div class="radio-group1">
                <label><input type="radio" name="loaiQuy" value="tienMat" checked /> Ti·ªÅn m·∫∑t</label>
                <label><input type="radio" name="loaiQuy" value="nganHang" /> Ng·∫ßn h√†ng</label>
                <label><input type="radio" name="loaiQuy" value="tongQuy" /> T·ªïng qu·ªπ</label>
            </div>
        </div>

        <div class="sidebar">
            <h4>Th·ªùi gian</h4>
            <div class="time-options">
                <div class="date-today-wrapper">
                    <label class="radio-option">
                        <input type="radio" name="thoigian" value="today" [(ngModel)]="selectedTime" (change)="onTimeChange()">
                        <span>{{ todayLabel }}</span>
                    </label>
                    <div class="button-datepicker-wrapper">
                        <button mat-icon-button (click)="picker.open()" class="arrow-button">
                            <i class="fa fa-chevron-down"></i>
                        </button>
                        <input matInput [matDatepicker]="picker" class="fake-input" (dateChange)="onDateSelected($event)">
                        <mat-datepicker #picker></mat-datepicker>
                    </div>
                </div>
                <div class="range-time" *ngIf="selectedTime === 'today' || selectedTime === 'custom'">
                    <div class="time-input-wrapper">
                        <label class="time-label">T·ª´</label>
                        <div class="time-input">
                            <input type="time" [(ngModel)]="fromTime">
                        </div>
                    </div>

                    <div class="time-input-wrapper">
                        <label class="time-label">ƒê·∫øn</label>
                        <div class="time-input">
                            <input type="time" [(ngModel)]="toTime">
                        </div>
                    </div>
                </div>
                <label class="radio-option">
                    <input type="radio" name="thoigian" value="custom" [(ngModel)]="selectedDay" (change)="onTimeChange()">
                    <span>L·ª±a ch·ªçn kh√°c</span>
                </label>
                <div *ngIf="showDateRange" class="date-range-picker">
                    <label>T·ª´:</label>
                    <input type="date" [(ngModel)]="fromDate">

                    <label>ƒê·∫øn:</label>
                    <input type="date" [(ngModel)]="toDate">
                    <button (click)="generateReport()">T√¨m</button>
                </div>

            </div>
        </div>

        <div class="sidebar">
            <h4>Lo·∫°i ch·ª©ng t·ª´</h4>
            <div class="radio-group1">
                <label><input type="checkbox" name="loaiCT" value="phieuThu" checked /> Phi·∫øu thu </label>
                <label><input type="checkbox" name="loaiCT" value="phieuChi" /> Phi·∫øu chi</label>
            </div>
        </div>
        <div class="sidebar">
            <h4>Lo·∫°i thu chi</h4>
            <select>
                <option value="" disabled selected>Ch·ªçn lo·∫°i thu chi</option>
                <option value="1">Chi ph√≠ kh√°c</option>
                <option value="2">Thu nh·∫≠p kh√°c</option>
                <option value="3">Chuy·ªÉn/R√∫t</option>
                <option value="4">Ti·ªÅn h√†ng</option>
            </select>
        </div>
        <div class="sidebar">
            <h4>Tr·∫°ng th√°i</h4>
            <div class="radio-group1">
                <label><input type="checkbox" name="trangThai" value="daThanhToan" checked /> ƒê√£ thanh to√°n </label>
                <label><input type="checkbox" name="trangThai" value="daHuy" /> ƒê√£ h·ªßy</label>
            </div>
        </div>
        <div class="sidebar">
            <h4>Ng∆∞·ªùi t·∫°o</h4>
            <select>
                <option value="" disabled selected>Ch·ªçn ng∆∞·ªùi t·∫°o</option>
                <option value="1">Nguy·ªÖn VƒÉn A</option>
                <option value="2">Tr·∫ßn Th·ªã B</option>
                <option value="3">L√™ VƒÉn C</option>
            </select>
        </div>
        <div class="sidebar">
            <h4>Nh√¢n vi√™n</h4>
            <select>
                <option value="" disabled selected>Ch·ªçn nh√¢n vi√™n</option>
                <option value="1">Nguy·ªÖn VƒÉn A</option>
                <option value="2">Tr·∫ßn Th·ªã B</option>
                <option value="3">L√™ VƒÉn C</option>
            </select>
        </div>
    </div>
    <main class="main-content ">
        <div class="search-actions ">
            <div class="search-wrapper ">
                <div class="search-box ">
                    <i class="fas fa-search search-icon "></i>
                    <input type="text " [(ngModel)]="searchKeyword " class="search-input " [placeholder]="selectedOptionLabel " (focus)="showDropdown=true " />
                    <button class="dropdown-toggle " (click)="toggleDropdown() ">
                <i class="fas fa-chevron-down "></i>
              </button>

                    <div class="dropdown-menu " *ngIf="showDropdown ">
                        <div class="dropdown-item " *ngFor="let option of searchOptions " [class.active]="selectedOption=== option.value " (click)="selectOption(option) ">
                            {{ option.label }}
                        </div>

                        <button class="btn btn-search-inside " (click)="onSearch() ">
                  <i class="fas fa-search "></i> T√¨m ki·∫øm
                </button>
                    </div>
                </div>
            </div>

            <div class="button-group ">
                <button class="btn btn-success " title="l·∫≠p phi·∫øu thu " (click)="openModalAdd()">
                    <i class="fa-solid fa-file-pen"></i>
                    L·∫≠p phi·∫øu thu
                </button>
                <button class="btn btn-success " title="L·∫≠p phi·∫øu chi " (click)="openModalchi()">
                    <i class="fa-solid fa-file-invoice-dollar"></i>
                    L·∫≠p phi·∫øu chi
                </button>

                <div class="dropdown-wrapper ">
                    <button class="btn btn-success dropdown-btn " title="Xu·∫•t file ">
                    <i class="fas fa-file-alt "></i> File <i class="fas fa-caret-down ml-1 "></i>
                  </button>
                    <div class="dropdown-menu ">
                        <div class="dropdown-item ">
                            <i class="fas fa-file-import "></i> Import
                        </div>
                        <div class="dropdown-item ">
                            <i class="fas fa-file-export "></i> Xu·∫•t file
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-backdrop" *ngIf="showFormAdd">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>L·∫≠p phi·∫øu thu(ti·ªÅn m·∫∑t)</h3>
                        <button class="close-btn" (click)="closeModalAdd()">√ó</button>
                    </div>
                    <form [formGroup]="customerForm" class="modal-body">
                        <div class="form-grid">
                            <!-- C·ªôt 1 -->
                            <div>

                                <label>M√£ phi·∫øu</label>
                                <input formControlName="maPhieu" readonly>

                                <label>Th·ªùi gian</label>
                                <input type="date" formControlName="thoigian">

                                <label>Lo·∫°i thu</label>
                                <input list="loaiThuList" formControlName="loaiThu">
                                <datalist id="loaiThuList">
                                  <option value="Thu nh·∫≠p kh√°c">
                                  <option value="Chuy·ªÉn/R√∫t">
                                  <option value="Nh·∫≠p h√†ng">
                                  <option value="Chi ph√≠ kh√°c">
                                </datalist>

                                <label>Gi√° tr·ªã</label>
                                <input type="number" formControlName="giaTri">

                                <label>Nh√¢n vi√™n</label>
                                <input list="nhanVienList" formControlName="nhanVien">
                                <datalist id="nhanVienList">
                                  <option value="V√µ Thanh An">
                                  <option value="Tr∆∞∆°ng Ng·ªçc H√¢n">
                                  <option value="Tr·∫ßn Phi H√πng">
                                  <option value="Tr·∫ßn Ho√†ng Vinh">
                                </datalist>
                            </div>
                            <!-- C·ªôt 2 -->
                            <div>
                                <label>ƒê·ªëi t∆∞·ª£ng n·ªôp</label>
                                <input list="doiTuongList" formControlName="doiTuong">
                                <datalist id="doiTuongList">
                                  <option value="Nh√† cung c·∫•p">
                                  <option value="Nh√¢n vi√™n">
                                  <option value="Kh√°ch h√†ng">
                                  <option value="Kh√°c">
                                </datalist>
                                <label>T√™n ng∆∞·ªùi n·ªôp</label>
                                <input formControlName="tenNguoinop">

                                <label>Ghi ch√∫</label>
                                <textarea formControlName="ghiChu"></textarea>
                            </div>
                        </div>
                        <!-- Footer -->
                        <div class="modal-footer">
                            <button type="button" (click)="save()" class="btn-save"><i class="fa-solid fa-floppy-disk"></i> L∆∞u</button>
                            <button type="button" (click)="closeModalAdd()" class="btn-cancel"><i class="fa-solid fa-ban"></i> B·ªè qua</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-backdrop" *ngIf="showFormchi">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>L·∫≠p phi·∫øu chi(ti·ªÅn m·∫∑t)</h3>
                        <button class="close-btn" (click)="closeModalchi()">√ó</button>
                    </div>
                    <form [formGroup]="customerForm" class="modal-body">
                        <div class="form-grid">
                            <!-- C·ªôt 1 -->
                            <div>
                                <label>M√£ phi·∫øu</label>
                                <input formControlName="maPhieu" readonly>

                                <label>Th·ªùi gian</label>
                                <input type="date" formControlName="thoigian">

                                <label>Lo·∫°i chi</label>
                                <input list="loaiThuList" formControlName="loaiThu">
                                <datalist id="loaiThuList">
                                  <option value="Thu nh·∫≠p kh√°c">
                                  <option value="Chuy·ªÉn/R√∫t">
                                  <option value="Nh·∫≠p h√†ng">
                                  <option value="Chi ph√≠ kh√°c">
                                </datalist>

                                <label>Gi√° tr·ªã</label>
                                <input type="number" formControlName="giaTri">

                                <label>Nh√¢n vi√™n</label>
                                <input list="nhanVienList" formControlName="nhanVien">
                                <datalist id="nhanVienList">
                                  <option value="V√µ Thanh An">
                                  <option value="Tr∆∞∆°ng Ng·ªçc H√¢n">
                                  <option value="Tr·∫ßn Phi H√πng">
                                  <option value="Tr·∫ßn Ho√†ng Vinh">
                                </datalist>
                            </div>
                            <!-- C·ªôt 2 -->
                            <div>
                                <label>ƒê·ªëi t∆∞·ª£ng n·ªôp</label>
                                <input list="doiTuongList" formControlName="doiTuong">
                                <datalist id="doiTuongList">
                                  <option value="Nh√† cung c·∫•p">
                                  <option value="Nh√¢n vi√™n">
                                  <option value="Kh√°ch h√†ng">
                                  <option value="Kh√°c">
                                </datalist>
                                <label>T√™n ng∆∞·ªùi n·ªôp</label>
                                <input formControlName="tenNguoinop">

                                <label>Ghi ch√∫</label>
                                <textarea formControlName="ghiChu"></textarea>
                            </div>
                        </div>
                        <!-- Footer -->
                        <div class="modal-footer">
                            <button type="button" (click)="save()" class="btn-save"><i class="fa-solid fa-floppy-disk"></i> L∆∞u</button>
                            <button type="button" (click)="closeModalchi()" class="btn-cancel"><i class="fa-solid fa-ban"></i> B·ªè qua</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="overlay" *ngIf="showPhieu">
                <div class="receipt-popup">
                    <div class="receipt-popup">

                        <div class="modal-header">
                            <h3>Phi·∫øu chi</h3>
                            <button class="close-btn" (click)="dongPhieu()">√ó</button>
                        </div>
                        <div class="info-grid">
                            <div class="field-row">
                                <label>M√£ phi·∫øu chi:</label>
                                <span class="value highlight">TTPN000046</span>
                            </div>
                            <div class="field-row">
                                <label>Nh√¢n vi√™n:</label>
                                <span class="value">h√πng</span>
                            </div>
                            <div class="field-row">
                                <label>Th·ªùi gian:</label>
                                <span class="value">11/05/2025 20:15</span>
                            </div>
                            <div class="field-row">
                                <label>Ph∆∞∆°ng th·ª©c:</label>
                                <span class="value">Ti·ªÅn m·∫∑t</span>
                            </div>
                            <div class="field-row">
                                <label>Ng∆∞·ªùi t·∫°o:</label>
                                <span class="value">h√πng</span>
                            </div>
                            <div class="field-row">
                                <label>Nh√† cung c·∫•p:</label>
                                <span class="value link">C√¥ng ty Ho√†ng Gia</span>
                            </div>
                        </div>

                        <table class="receipt-table">
                            <thead>
                                <tr>
                                    <th>M√£ phi·∫øu</th>
                                    <th>Th·ªùi gian</th>
                                    <th>Gi√° tr·ªã phi·∫øu</th>
                                    <th>ƒê√£ chi tr∆∞·ªõc</th>
                                    <th>Ti·ªÅn chi</th>
                                    <th>Tr·∫°ng th√°i</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>PN000046</td>
                                    <td>11/05/2025 20:14</td>
                                    <td>24,960,000</td>
                                    <td>0</td>
                                    <td>24,960,000</td>
                                    <td>ƒê√£ thanh to√°n</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="total-row">
                            <span>T·ªïng ti·ªÅn chi:</span>
                            <strong> 24,960,000</strong>
                        </div>

                        <div class="button-group">
                            <button class="btn green"><i class="fa-solid fa-square-check"></i> C·∫≠p nh·∫≠t</button>
                            <button class="btn print"><i class="fa-solid fa-print"></i> In</button>
                            <button class="btn red"><i class="fa-solid fa-ban"></i> H·ªßy b·ªè</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="summary-box">
            <div class="summary-item">
                <div>Qu·ªπ ƒë·∫ßu k·ª≥</div>
                <div class="nomal">0</div>
            </div>
            <div class="summary-item">
                <div>T·ªïng thu</div>
                <div class="text-blue">622,350,000</div>
            </div>
            <div class="summary-item">
                <div>T·ªïng chi</div>
                <div class="text-red">-622,350,000</div>
            </div>
            <div class="summary-item">
                <div>
                    T·ªìn qu·ªπ <i class="fa-solid fa-circle-info" title="T·ªìn qu·ªπ = Qu·ªπ ƒë·∫ßu k·ª≥ + T·ªïng thu - T·ªïng chi"></i>
                </div>
                <div class="text-green">0</div>
            </div>
        </div>

        <table class="customer-table">
            <thead>
                <tr>
                    <th><input type="checkbox" /></th>
                    <th>M√£ phi·∫øu</th>
                    <th>Th·ªùi gian</th>
                    <th>Ng∆∞·ªùi t·∫°o</th>
                    <th>Lo·∫°i thu chi</th>
                    <th>Ng∆∞·ªùi n·ªôp/nh·∫≠n</th>
                    <th>Gi√° tr·ªã</th>
                    <th>Tr·∫°ng th√°i</th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngFor="let c of customers; let i = index">
                    <tr (click)="selectCustomer(c, i)">
                        <td><input type="checkbox" /></td>
                        <td>{{ c.code }}</td>
                        <td>{{ c.name }}</td>
                        <td>{{ c.type }}</td>
                        <td>{{ c.phone }}</td>
                        <td>{{ c.address }}</td>
                        <td>{{ c.region }}</td>
                        <td>{{ c.note }}</td>
                    </tr>

                    <tr *ngIf="selectedCustomer && selectedIndex === i">
                        <td colspan="8">
                            <div class="payment-detail-box">
                                <!-- Tabs -->
                                <div class="tabs">
                                    <div class="tab active">Th√¥ng tin</div>
                                </div>

                                <!-- N·ªôi dung chi ti·∫øt -->
                                <div class="detail-content">
                                    <!-- C·ªôt tr√°i -->
                                    <div class="col">
                                        <div class="field-row">
                                            <label>M√£ phi·∫øu:</label>
                                            <span class="value highlight">TTPN000046</span>
                                        </div>
                                        <div class="field-row">
                                            <label>Th·ªùi gian:</label>
                                            <span class="value">11/05/2025 20:15</span>
                                        </div>
                                        <div class="field-row">
                                            <label>Gi√° tr·ªã:</label>
                                            <span class="value">
                                                -24,960,000</span>
                                        </div>
                                        <div class="field-row">
                                            <label>Ng∆∞·ªùi nh·∫≠n:</label>
                                            <span class="value highlight">
                                                NCC0002 - C√¥ng ty Ho√†ng Gia</span>
                                        </div>
                                        <div class="field-row">
                                            <label>S·ªë ƒëi·ªán tho·∫°i:</label>
                                            <span class="value">
                                                0988888887</span>
                                        </div>
                                        <div class="field-row">
                                            <label>ƒê·ªãa ch·ªâ:</label>
                                            <span class="value"></span>
                                        </div>
                                    </div>


                                    <!-- C·ªôt gi·ªØa -->
                                    <div class="col">

                                        <div class="field-row">
                                            <label>Lo·∫°i thu chi:</label>
                                            <span class="value">{{ selectedCustomer.paymentType }}</span>
                                        </div>
                                        <div class="field-row">
                                            <label>Tr·∫°ng th√°i:</label>
                                            <span class="value">{{ selectedCustomer.status }}</span>
                                        </div>
                                        <div class="field-row">
                                            <label>Ng∆∞·ªùi t·∫°o:</label>
                                            <span class="value">{{ selectedCustomer.createdBy }}</span>
                                        </div>
                                        <div class="field-row">
                                            <label>Nh√¢n vi√™n:</label>
                                            <span class="value">{{ selectedCustomer.staff }}</span>
                                        </div>
                                        <div class="field-row">
                                            <label>ƒê·ªëi t∆∞·ª£ng nh·∫≠n:</label>
                                            <span class="value">{{ selectedCustomer.receiverType }}</span>
                                        </div>
                                    </div>


                                    <!-- C·ªôt ph·∫£i (ghi ch√∫) -->
                                    <div class="col note-col">
                                        <i>Ghi ch√∫:...</i>
                                    </div>
                                </div>

                                <!-- Ghi ch√∫ ph·ª• -->
                                <div class="sub-note" *ngIf="selectedCustomer.relatedCode">
                                    <i>Phi·∫øu chi t·ª± ƒë·ªông ƒë∆∞·ª£c t·∫°o g·∫Øn v·ªõi nh·∫≠p h√†ng</i>
                                    <a href="#"> {{ selectedCustomer.relatedCode }}</a>
                                </div>

                                <!-- C√°c n√∫t h√†nh ƒë·ªông -->
                                <div class="detail-actions">
                                    <button class="btn btn-success" (click)="moPhieu()">
                                <i class="fa-solid fa-share"></i> M·ªü phi·∫øu </button>
                                    <button class="btn print" (click)="print()">
                                <i class="fa-solid fa-print"></i> In</button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </ng-container>
            </tbody>
        </table>
        <div class="receipt-popup" *ngIf="showPhieu">

            <div class="modal-header">
                <h3>Phi·∫øu chi</h3>
                <button class="close-btn" (click)="dongPhieu()">√ó</button>
            </div>
            <div class="info-grid">
                <div class="field-row">
                    <label>M√£ phi·∫øu chi:</label>
                    <span class="value highlight">TTPN000046</span>
                </div>
                <div class="field-row">
                    <label>Nh√¢n vi√™n:</label>
                    <span class="value">h√πng</span>
                </div>
                <div class="field-row">
                    <label>Th·ªùi gian:</label>
                    <span class="value">11/05/2025 20:15</span>
                </div>
                <div class="field-row">
                    <label>Ph∆∞∆°ng th·ª©c:</label>
                    <span class="value">Ti·ªÅn m·∫∑t</span>
                </div>
                <div class="field-row">
                    <label>Ng∆∞·ªùi t·∫°o:</label>
                    <span class="value">h√πng</span>
                </div>
                <div class="field-row">
                    <label>Nh√† cung c·∫•p:</label>
                    <span class="value link">C√¥ng ty Ho√†ng Gia</span>
                </div>
            </div>

            <table class="receipt-table">
                <thead>
                    <tr>
                        <th>M√£ phi·∫øu</th>
                        <th>Th·ªùi gian</th>
                        <th>Gi√° tr·ªã phi·∫øu</th>
                        <th>ƒê√£ chi tr∆∞·ªõc</th>
                        <th>Ti·ªÅn chi</th>
                        <th>Tr·∫°ng th√°i</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>PN000046</td>
                        <td>11/05/2025 20:14</td>
                        <td>24,960,000</td>
                        <td>0</td>
                        <td>24,960,000</td>
                        <td>ƒê√£ thanh to√°n</td>
                    </tr>
                </tbody>
            </table>

            <div class="total-row">
                <span>T·ªïng ti·ªÅn chi:</span>
                <strong>24,960,000</strong>
            </div>

            <div class="button-group">
                <button class="btn green">‚úî C·∫≠p nh·∫≠t</button>
                <button class="btn print">üñ® In</button>
                <button class="btn red">‚úñ H·ªßy b·ªè</button>
            </div>
        </div>

        <div class="pagination ">
            <button class="page-btn " disabled>
              <i class="fas fa-chevron-left "></i>
            </button>

            <button class="page-btn active ">1</button>
            <button class="page-btn ">2</button>
            <button class="page-btn ">3</button>
            <span class="dots ">...</span>
            <button class="page-btn ">10</button>

            <button class="page-btn ">
              <i class="fas fa-chevron-right "></i>
            </button>
        </div>

    </main>
</div>
<div id="printArea">
    <div style="text-align: right; font-size: 12px;">
        <div>D·ªãch v·ª• ph·ª• t√πng - S·ªï qu·ªπ</div>
    </div>
    <div style="font-weight: bold;">Quy nh∆°n, B√¨nh ƒë·ªãnh</div>
    <div>SDT: 0932541103</div>
    <div>ƒê·ªãa ch·ªâ:</div>

    <h2 style="text-align: center; margin-top: 20px;">PHI·∫æU CHI</h2>
    <div style="text-align: center;">M√£ phi·∫øu chi: TTPN000043</div>
    <div style="text-align: center;">Ng√†y: 08/05/2025</div>

    <br>
    <table class="print-table">
        <tr>
            <td class="label">H·ªç t√™n ng∆∞·ªùi nh·∫≠n ti·ªÅn:</td>
            <td class="value" style="border-bottom: 1px dotted black; width: 450px;">C·ª≠a h√†ng ƒê·∫°i Vi·ªát</td>
        </tr>
        <tr>
            <td class="label">S·ªë ƒëi·ªán tho·∫°i:</td>
            <td class="value" style="border-bottom: 1px dotted black; width: 450px;">0988888884</td>
        </tr>
        <tr>
            <td class="label">ƒê·ªãa ch·ªâ:</td>
            <td class="value" style="border-bottom: 1px dotted black; width: 450px;">&nbsp;</td>
        </tr>
        <tr>
            <td class="label">L√Ω do chi:</td>
            <td class="value" style="border-bottom: 1px dotted black; width: 450px;">&nbsp;</td>
        </tr>
    </table>
    <br>
    <div>S·ªë ti·ªÅn: <b>13,980,000 ƒë·ªìng</b></div>
    <div>B·∫±ng ch·ªØ: M∆∞·ªùi ba tri·ªáu ch√≠n trƒÉm t√°m m∆∞∆°i ngh√¨n ƒë·ªìng ch·∫µn</div>

    <br><br>
    <div style=" text-align: right; margin-top: 20px; ">
        Ng√†y ...... Th√°ng ...... NƒÉm ........
    </div>
    <table style="width: 92%; text-align: center; margin-top: 40px;">
        <tr>
            <td>Ng∆∞·ªùi l·∫≠p phi·∫øu</td>
            <td>Ng∆∞·ªùi nh·∫≠n</td>
            <td>Th·ªß qu·ªπ</td>
        </tr>
    </table>





</div>

<app-footer></app-footer>